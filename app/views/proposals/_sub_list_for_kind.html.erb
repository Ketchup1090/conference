<%
# Variables:
# * container => ActiveRecord instance that has #proposals, e.g., a User.
# * title => Title of the container, e.g., "user", or leave blank to guess based on container's class.
# * sorter => Display the sort toolbar? Defaults to false.
# * kind => :sessions or :proposals

title  = local_assigns[:title]
sorter = local_assigns[:title]

records = \
  case kind
  when :proposals then container.proposals.unconfirmed
  when :sessions then container.proposals.confirmed
  else raise TypeError, "Unknown kind: #{kind}"
  end
%>

<% unless records.blank? %>
  <h3><%= kind.to_s.titleize %> for this <%= title || container.class.name.singularize.humanize.downcase %></h3>
  <%= render :partial => "proposals/list", :locals => {:kind => kind, :records => records, :sorter => sorter} %>
<% end %>

